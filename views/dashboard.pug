html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title AdminLTE-like Dashboard

    // Bootstrap CSS
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css", rel="stylesheet")

    // AdminLTE CSS (replace with your actual path)
    link(rel="stylesheet", href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback")
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css")
    link(rel="stylesheet", href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css")
    link(href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css", rel="stylesheet")

  body(class="sidebar-mini layout-fixed")
    .wrapper

      // Navbar
      nav.main-header.navbar.navbar-expand.navbar-dark.bg-dark
        .container-fluid
          button.sidebar-toggle.btn.btn-dark(data-widget="pushmenu")
            i.fas.fa-bars
          ul.navbar-nav.ml-auto
            li.nav-item
              span.nav-link User: 
                span#user-email
            li.nav-item
              a.nav-link(href="/logout") Logout

      // Sidebar
      aside.main-sidebar.sidebar-dark-primary.elevation-4
        // Brand Logo
        a.brand-link(href="#")
          span.brand-text.font-weight-light AdminLTE

        // Sidebar Menu
        .sidebar
          nav.mt-2
            ul.nav.nav-pills.nav-sidebar.flex-column(data-widget="treeview", role="menu", data-accordion="false")
              // Add sidebar links here
              li.nav-item
                a.nav-link(href="#")
                  i.nav-icon.fas.fa-tachometer-alt
                  p Dashboard
              li.nav-item
                a.nav-link(href="#")
                  i.nav-icon.fas.fa-chart-pie
                  p Charts
              li.nav-item
                a.nav-link(href="#")
                  i.nav-icon.fas.fa-table
                  p Tables

      // Content Wrapper
      .content-wrapper
        // Content Header (Page header)
        .content-header
          .container-fluid
            h1.m-0 Dashboard

        // Main content
        section.content
          .container-fluid
            // Display username dynamically
            p Welcome, #{userEmail}

      // Footer
      footer.main-footer
        .container-fluid.text-center
          p &copy; 2024 Your Company

    // jQuery
    script(src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js")

    // Bootstrap JS
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js")

    // AdminLTE JS (replace with your actual path)
    script(src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js")

    // Your custom script
    script.
      // JavaScript to set user email in the sidebar
      const userEmail = localStorage.getItem('userEmail');
      
      if (userEmail) {
          document.getElementById('user-email').textContent = userEmail;
      }

      // Prevent redirecting to login page on back button press
      if (window.history && window.history.pushState) {
          window.history.pushState('forward', null, ''); // Replace current state
          window.onpopstate = function () {
              window.history.pushState('forward', null, ''); // Push state again to prevent back
              window.location.replace('/dashboard'); // Redirect to dashboard
          };
      }
